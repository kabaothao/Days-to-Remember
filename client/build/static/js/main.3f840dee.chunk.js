(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,n,t){},109:function(e,n,t){},118:function(e,n,t){},125:function(e,n,t){},126:function(e,n,t){"use strict";t.r(n);var a,r,c,s,o,i,l,d=t(1),j=t.n(d),b=t(33),u=t.n(b),m=(t(107),t(4)),h=t(19),O=t(15),p=t(9),x=t(25),v=t.n(x),g=t(39),f=t(57),w=t(12),y=(t(109),t(144)),k=t(137),N=t(90),S=t(138),C=t(132),I=t(36),$=t(145),E=Object($.a)(a||(a=Object(I.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),F=Object($.a)(r||(r=Object(I.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),_=Object($.a)(c||(c=Object(I.a)(["\n  mutation addEvent($title:String!, $name:String, $phoneNum:String, $date:String) {\n    addEvent(title: $title, name: $name, phoneNum: $phoneNum, date: $date) {\n      title\n      name\n      phoneNum\n      date\n\n      # cards {\n      #     _id\n      #     cardRecipient\n      #     cardText\n      #     cardSender\n      #     createdAt\n      # }\n    }\n  }\n"]))),L=Object($.a)(s||(s=Object(I.a)(["\n  mutation removeEvent($eventId: ID!) {\n    removeEvent(eventId: $eventId) {\n      _id\n      title\n      name\n      phoneNum\n      date\n\n      # cards {\n      #   _id\n      #   cardRecipient\n      #   cardText\n      #   cardSender\n      #   createdAt\n      # }\n    }\n  }\n"]))),T=Object($.a)(o||(o=Object(I.a)(["\n  {\n    me {\n      _id\n      username\n      email\n      password\n      events {\n        _id\n        title\n        name\n        phoneNum\n        date\n        hasBeenSent\n      }\n      # cards {\n      #     _id\n      #     cardRecipient\n      #     cardText\n      #     cardSender\n      #     createdAt\n      # }\n    }\n  }\n"]))),D=Object($.a)(i||(i=Object(I.a)(["\n  query getEvents {\n    events {\n      _id\n      title\n      name\n      phoneNum\n      date\n    }\n  }\n"]))),Y=(Object($.a)(l||(l=Object(I.a)(["\nquery getEvent($eventId: ID!) {\n  event(eventId: $eventId) {\n      _id\n      title\n      name\n      phoneNum\n      date\n  }\n}"]))),t(68)),q=t(91),G=t(80),X=t(46),P=t(47),B=t(77),M=new(function(){function e(){Object(X.a)(this,e)}return Object(P.a)(e,[{key:"getProfile",value:function(){return Object(B.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(B.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),R=t(2),z=function(){var e=Object(d.useState)({title:"",name:"",phoneNum:"",date:""}),n=Object(w.a)(e,2),t=n[0],a=n[1],r=Object(d.useState)(),c=Object(w.a)(r,2),s=(c[0],c[1],Object(C.a)(_,{update:function(e,n){var t=n.data.addEvent;try{var a=e.readQuery({query:D}).events;e.writeQuery({query:D,data:{events:[t].concat(Object(f.a)(a))}})}catch(c){console.error(c)}var r=e.readQuery({query:T}).me;e.writeQuery({query:T,data:{me:Object(m.a)(Object(m.a)({},r),{},{events:[].concat(Object(f.a)(r.events),[t])})}})}})),o=Object(w.a)(s,2),i=o[0],l=o[1],b=(l.error,l.data,function(){var e=Object(g.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,console.log("=======",t),e.next=5,i({variables:{title:t.title,name:t.name,phoneNum:t.phoneNum,date:t.date}});case 5:a=e.sent,a.data,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}()),u=function(e){var n=e.target,r=n.name,c=n.value;a(Object(m.a)(Object(m.a)({},t),{},Object(p.a)({},r,c)))},O=j.a.useState(!1),x=Object(w.a)(O,2),I=x[0],$=x[1],E=function(){return Object(R.jsx)("div",{id:"submit",children:"Your event has been saved!"})};return Object(R.jsx)("div",{className:"home-page",children:Object(R.jsx)("div",{className:"home-page-wrapper",children:M.loggedIn()?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("h3",{className:"dtr",children:"Add an Event"}),Object(R.jsx)("div",{className:"form",children:Object(R.jsxs)(y.a,{className:"formWrapper",onSubmit:b,children:[Object(R.jsxs)(y.a.Group,{as:k.a,className:"mb-3",controlId:"formHorizontalTo",children:[Object(R.jsxs)(y.a.Label,{column:!0,lg:6,children:["Message ",Object(R.jsx)(G.a,{})]}),Object(R.jsx)(N.a,{sm:10,children:Object(R.jsx)(y.a.Control,{type:"input",name:"title",onChange:u,placeholder:"Your message here"})})]}),Object(R.jsxs)(y.a.Group,{as:k.a,className:"mb-3",controlId:"formHorizontalTo",children:[Object(R.jsxs)(y.a.Label,{column:!0,lg:6,children:["To ",Object(R.jsx)(G.b,{})]}),Object(R.jsx)(N.a,{sm:10,children:Object(R.jsx)(y.a.Control,{type:"input",name:"name",onChange:u,placeholder:"Name"})})]}),Object(R.jsxs)(y.a.Group,{as:k.a,className:"mb-3",controlId:"formHorizontalFrom",children:[Object(R.jsxs)(y.a.Label,{column:!0,lg:6,children:["Phone Number ",Object(R.jsx)(Y.b,{})]}),Object(R.jsx)(N.a,{sm:10,children:Object(R.jsx)(y.a.Control,{type:"input",name:"phoneNum",onChange:u,placeholder:"+1XXXXXXXXXX"})})]}),Object(R.jsxs)(y.a.Group,{as:k.a,className:"mb-3",controlId:"formHorizontalFrom",children:[Object(R.jsxs)(y.a.Label,{column:!0,lg:6,children:["Date ",Object(R.jsx)(q.a,{})]}),Object(R.jsx)(N.a,{sm:10,children:Object(R.jsx)(y.a.Control,{type:"input",name:"date",onChange:u,placeholder:"mm/dd/yyyy"})})]}),Object(R.jsx)(y.a.Group,{as:k.a,className:"mb-3",children:Object(R.jsx)(N.a,{sm:{span:10,offset:2},children:Object(R.jsxs)(S.a,{type:"submit",onClick:function(){return $(!0)},children:[" ","Submit"]})})}),Object(R.jsx)("h4",{children:I?Object(R.jsx)(E,{}):null})]})})]}):Object(R.jsxs)("h2",{className:"welcome",children:["Welcome to DAYS TO REMEMBER. Please ",Object(R.jsx)(h.b,{to:"/login",children:"login"})," or"," ",Object(R.jsx)(h.b,{to:"/signup",children:"signup"})," to add an event."]})})})},A=t(98),H=t(128),Q=t(146),U=t(141),W=t(97),J=t(142),V=t(139),K=t(143),Z=(t(118),t(94)),ee=function(){return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(J.a,{className:"nav",fixed:"top",children:[Object(R.jsx)(V.a,{children:Object(R.jsxs)(J.a.Brand,{className:"cake",as:h.b,to:"/",children:[Object(R.jsxs)("div",{className:"logo",children:["  DR ",Object(R.jsx)(Z.a,{})]})," "]})}),M.loggedIn()?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(K.a.Item,{children:Object(R.jsx)(K.a.Link,{className:"btn btn-lg btn-info m-2",to:"/events",children:Object(R.jsx)(h.b,{to:"/events",children:"Events"})})}),Object(R.jsx)(K.a.Item,{children:Object(R.jsx)(K.a.Link,{className:"btn btn-lg btn-info m-2",onClick:M.logout,children:"Logout"})})]}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(h.b,{className:"btn btn-lg btn-info m-2",to:"/login",children:"Login"}),Object(R.jsx)(h.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})]})})},ne=(t(88),function(){var e=Object(d.useState)({username:"",email:"",password:""}),n=Object(w.a)(e,2),t=n[0],a=n[1],r=Object(O.f)(),c=Object(C.a)(F),s=Object(w.a)(c,1)[0],o=function(e){var n=e.target,r=n.name,c=n.value;a(Object(m.a)(Object(m.a)({},t),{},Object(p.a)({},r,c)))},i=function(){var e=Object(g.a)(v.a.mark((function e(n){var c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),!1===n.currentTarget.checkValidity()&&(n.preventDefault(),n.stopPropagation()),e.prev=3,e.next=6,s({variables:t});case 6:if(c=e.sent,o=c.data,console.log(o),o){e.next=11;break}throw new Error("something went wrong!");case 11:M.login(o.addUser.token),r.push("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0);case 18:a({username:"",email:"",password:""});case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(n){return e.apply(this,arguments)}}();return Object(R.jsx)("div",{className:"form-wrapper",children:Object(R.jsx)("div",{className:"form-left",children:Object(R.jsxs)(y.a,{onSubmit:i,children:[Object(R.jsx)("h1",{children:"Signup"}),Object(R.jsxs)(y.a.Group,{children:[Object(R.jsx)(y.a.Label,{htmlFor:"username",children:"Username"}),Object(R.jsx)(y.a.Control,{type:"text",placeholder:"Your username",name:"username",onChange:o,value:t.username,required:!0}),Object(R.jsx)(y.a.Control.Feedback,{type:"invalid"})]}),Object(R.jsxs)(y.a.Group,{children:[Object(R.jsx)(y.a.Label,{htmlFor:"email",children:"Email"}),Object(R.jsx)(y.a.Control,{type:"email",placeholder:"Your email address",name:"email",onChange:o,value:t.email,required:!0}),Object(R.jsx)(y.a.Control.Feedback,{type:"invalid"})]}),Object(R.jsxs)(y.a.Group,{children:[Object(R.jsx)(y.a.Label,{htmlFor:"password",children:"Password"}),Object(R.jsx)(y.a.Control,{type:"password",placeholder:"Your password",name:"password",onChange:o,value:t.password,required:!0}),Object(R.jsx)(y.a.Control.Feedback,{type:"invalid"})]}),Object(R.jsx)(S.a,{type:"submit",children:"Submit"})]})})})}),te=t(96),ae=t.n(te),re=(t(122),t(125),t(140)),ce=function(){var e=Object(re.a)(T),n=(e.loading,e.data),t=(null===n||void 0===n?void 0:n.me.events)||[],a=Object(C.a)(L),r=Object(w.a)(a,1)[0],c=j.a.useState(!1),s=Object(w.a)(c,2),o=(s[0],s[1]),i=function(){var e=Object(g.a)(v.a.mark((function e(n){var a,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r({variables:{eventId:n}});case 3:a=e.sent,c=a.data,console.log("data",c,"updated userdata",t),o(!0),window.location.reload(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}();return t.length?Object(R.jsxs)("div",{className:"events-page",children:[Object(R.jsx)("h1",{className:"event-page-discr",children:"Your Events"}),t&&t.map((function(e){return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)("div",{className:"event-border",children:[Object(R.jsxs)("div",{className:"event-title",children:[e.title," ",Object(R.jsx)(Y.a,{})]},e._id),Object(R.jsxs)("div",{className:"event-name",children:["of ",e.name]},e._id),Object(R.jsxs)("div",{className:"event-date",children:[Object(R.jsx)(ae.a,{format:"MM/DD/YYYY",unix:!0,children:e.date/1e3}),Object(R.jsx)("div",{children:Object(R.jsx)(S.a,{onClick:function(){return i(e._id)},className:"event-delete-btn",type:"submit",children:"delete"})})]},e._id)]})})}))]}):Object(R.jsx)("h3",{className:"no-events",children:"No Events Yet"})},se=function(){var e=Object(d.useState)({email:"",password:""}),n=Object(w.a)(e,2),t=n[0],a=n[1],r=Object(C.a)(E),c=Object(w.a)(r,1)[0],s=Object(O.f)(),o=function(e){var n=e.target,r=n.name,c=n.value;a(Object(m.a)(Object(m.a)({},t),{},Object(p.a)({},r,c)))},i=function(){var e=Object(g.a)(v.a.mark((function e(n){var r,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),!1===n.currentTarget.checkValidity()&&(n.preventDefault(),n.stopPropagation()),e.prev=3,e.next=6,c({variables:t});case 6:if(r=e.sent,o=r.data,console.log(o),o){e.next=11;break}throw new Error("something went wrong!");case 11:M.login(o.login.token),s.push("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.error(e.t0);case 18:a({email:"",password:""});case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(n){return e.apply(this,arguments)}}();return Object(R.jsx)("div",{className:"form-wrapper",children:Object(R.jsx)("div",{className:"form-right",children:Object(R.jsxs)(y.a,{onSubmit:i,children:[Object(R.jsx)("h1",{children:"Login"}),Object(R.jsxs)(y.a.Group,{children:[Object(R.jsx)(y.a.Label,{htmlFor:"username",children:"Email"}),Object(R.jsx)(y.a.Control,{type:"text",placeholder:"Your email",name:"email",onChange:o,value:t.email,required:!0}),Object(R.jsx)(y.a.Control.Feedback,{type:"invalid"})]}),Object(R.jsxs)(y.a.Group,{children:[Object(R.jsx)(y.a.Label,{htmlFor:"password",children:"Password"}),Object(R.jsx)(y.a.Control,{type:"password",placeholder:"Your password",name:"password",onChange:o,value:t.password,required:!0}),Object(R.jsx)(y.a.Control.Feedback,{type:"invalid"})]}),Object(R.jsx)(S.a,{type:"submit",children:"Submit"})]})})})},oe=Object(A.a)({uri:"/graphql"}),ie=Object(W.a)((function(e,n){var t=n.headers,a=localStorage.getItem("id_token");return{headers:Object(m.a)(Object(m.a)({},t),{},{authorization:a?"Bearer ".concat(a):""})}})),le=new H.a({link:ie.concat(oe),cache:new Q.a});var de=function(){return Object(R.jsx)(U.a,{client:le,children:Object(R.jsx)(h.a,{children:Object(R.jsxs)("div",{children:[Object(R.jsx)(ee,{}),Object(R.jsxs)(O.c,{children:[Object(R.jsx)(O.a,{exact:!0,path:"/signup",component:ne}),Object(R.jsx)(O.a,{exact:!0,path:"/login",component:se}),Object(R.jsx)(O.a,{exact:!0,path:"/",component:z}),Object(R.jsx)(O.a,{exact:!0,path:"/events",component:ce}),Object(R.jsx)(O.a,{render:function(){return Object(R.jsx)("h1",{className:"display-2",children:"Wrong page!"})}})]})]})})})},je=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,148)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,c=n.getLCP,s=n.getTTFB;t(e),a(e),r(e),c(e),s(e)}))};u.a.render(Object(R.jsx)(j.a.StrictMode,{children:Object(R.jsx)(de,{})}),document.getElementById("root")),je()},88:function(e,n,t){}},[[126,1,2]]]);
//# sourceMappingURL=main.3f840dee.chunk.js.map